<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <meta charset="UTF-8" />
  <title>Phasmo CS</title>
  <style>
    /*****************************************************
     1) DEMONIC BACKGROUND (Spinning Circle + Pentagram)
    *****************************************************/
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      /* We'll handle scroll hiding/showing via JS. */
      font-family: Arial, sans-serif;
      color: #fff;
      background: #000;
    }

    .symbol-container {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 400px;
      height: 400px;
      transform: translate(-50%, -50%);
      z-index: 1;
    }
    svg#bloodSymbol {
      width: 100%;
      height: 100%;
    }
    .rotateGroup {
      transform-box: fill-box;
      transform-origin: center;
      animation: rotatePentagram 20s linear infinite;
    }
    @keyframes rotatePentagram {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .blood-line {
      fill: none;
      stroke: #b00;
      stroke-width: 4;
      stroke-linejoin: round;
      stroke-linecap: round;
      filter: blur(2px);
      animation: flameFlicker 3s infinite ease-in-out;
    }
    @keyframes flameFlicker {
      0%   { stroke: #b00; opacity: 0.8; filter: blur(2px); }
      50%  { stroke: #c00; opacity: 1;   filter: blur(3px); }
      100% { stroke: #b00; opacity: 0.7; filter: blur(2px); }
    }

    /*****************************************************
     2) DRIFTING EMBERS (random sine wave)
    *****************************************************/
    .embers {
      position: absolute;
      bottom: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 0;
    }
    .ember {
      position: absolute;
      bottom: 0;
      width: 3px; height: 3px;
      background: #c04000;
      border-radius: 50%;
      opacity: 0;
    }

    /*****************************************************
     3) TABLE WRAPPER (80% wide on large, no border, etc.)
    *****************************************************/
    .table-wrapper {
      position: relative;
      z-index: 2;
      width: 80%;
      max-width: 1200px;
      margin: 20px auto 40px auto;
      padding: 20px;
      background: rgba(0,0,0,0.4);
      border-radius: 8px;
    }

    .table-wrapper h1 {
      text-align: center;
      margin-bottom: 10px;
      color: #f00;
      text-shadow: 0 0 5px #f00;
    }

    .filters {
      text-align: center;
      margin-bottom: 10px;
    }
    .search-box {
      margin-bottom: 8px;
    }
    .search-box input {
      width: 60%;
      max-width: 300px;
      padding: 6px;
      border-radius: 4px;
      border: 1px solid #900;
      outline: none;
      background: #200;
      color: #fdd;
    }
    .evidence-boxes {
      margin-top: 5px;
    }
    .evidence-boxes label {
      margin-right: 10px;
      cursor: pointer;
    }
    .evidence-boxes input[type="checkbox"] {
      margin-right: 4px;
    }

    /*****************************************************
     4) RED TABLE (LESS RIGID)
    *****************************************************/
    .red-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 6px; /* row gaps */
      background: rgba(0,0,0,0.3);
    }
    .red-table th, .red-table td {
      border: none;  /* no rigid borders */
      padding: 8px 10px;
      text-align: left;
      color: #fff;
    }
    .red-table thead tr {
      background: #600; /* dark red header row */
    }
    .red-table th {
      cursor: pointer;
      text-shadow: 0 0 2px #f00;
    }
    .red-table tbody tr {
      border-radius: 6px;
    }
    .red-table tr:nth-child(even) {
      background: rgba(200,0,0,0.2); 
    }
    .red-table tr:nth-child(odd) {
      background: rgba(100,0,0,0.2);
    }
    .red-table tr:hover td {
      background: rgba(255,0,0,0.2);
    }
    .sortable::after {
      content: " \25B2\25BC";
      font-size: 0.7em;
      color: #888;
      margin-left: 5px;
    }

    /*****************************************************
     5) MOBILE-FRIENDLY 
       - Larger search boxes 
       - smaller table text
    *****************************************************/
    @media (max-width: 768px) {
      .search-box input {
        width: 90%;
        font-size: 16px;
        padding: 10px;
      }
      th, td {
        padding: 6px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <!-- Spinning Pentagram in Center -->
  <div class="symbol-container">
    <svg id="bloodSymbol" viewBox="0 0 200 200">
      <g class="rotateGroup">
        <circle id="circlePath" class="blood-line" cx="100" cy="100" r="90" />
        <path id="starPath" class="blood-line"
          d="M100,10 
             L152.9,172.81 
             L14.4,72.19 
             L185.6,72.19 
             L47.1,172.81 
             Z"
        />
      </g>
    </svg>
  </div>

  <!-- Drifting Embers -->
  <div class="embers" id="emberContainer"></div>

  <!-- GHOSTS TABLE -->
  <div class="table-wrapper">
    <h1>Ghosts Table</h1>
    <div class="filters">
      <!-- Search -->
      <div class="search-box">
        <input 
          type="text" 
          id="ghostSearch" 
          placeholder="Search Ghosts..."
          onkeyup="filterAllGhosts()"
        />
      </div>
      <!-- Evidence Checkboxes -->
      <div class="evidence-boxes">
        <label>
          <input type="checkbox" value="Spirit Box" onclick="filterAllGhosts()" />
          Spirit Box
        </label>
        <label>
          <input type="checkbox" value="Ghost Orbs" onclick="filterAllGhosts()" />
          Ghost Orbs
        </label>
        <label>
          <input type="checkbox" value="Freezing Temps" onclick="filterAllGhosts()" />
          Freezing Temps
        </label>
      </div>
    </div>
    <table class="red-table" id="ghostTable">
      <thead>
        <tr>
          <th class="sortable" onclick="sortGhostTable(0,false)">Name</th>
          <th>Unique Trait</th>
          <th>Roaming Behavior</th>
          <th>Footstep Speed</th>
          <th class="sortable" onclick="sortGhostTable(4,false)">Forced Evidence</th>
          <th class="sortable" onclick="sortGhostTable(5,true)">Interaction Range</th>
          <th class="sortable" onclick="sortGhostTable(6,true)">Base Speed</th>
          <th class="sortable" onclick="sortGhostTable(7,true)">Mod. Speed</th>
          <th class="sortable" onclick="sortGhostTable(8,true)">Hunt %</th>
        </tr>
      </thead>
      <tbody>
        <!-- SPIRIT -->
<tr>
  <td>Spirit</td>
  <td>No special abilities; smudge sticks last longer against it</td>
  <td>Normal roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- WRAITH -->
<tr>
  <td>Wraith</td>
  <td>Avoids salt footsteps; can teleport to players randomly</td>
  <td>Teleport-based roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- PHANTOM -->
<tr>
  <td>Phantom</td>
  <td>Looking at it drains sanity faster; vanishes on photo</td>
  <td>Normal roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- POLTERGEIST -->
<tr>
  <td>Poltergeist</td>
  <td>Throws multiple objects at once; throw freq. is high</td>
  <td>Normal roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- BANSHEE -->
<tr>
  <td>Banshee</td>
  <td>Stalks 1 target; hunts from range if target is inside</td>
  <td>Target-focused roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- JINN -->
<tr>
  <td>Jinn</td>
  <td>Faster if far away & breaker on; territorial near breaker</td>
  <td>Territorial roam (breaker area)</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>Up to ~2.5 (line-of-sight far distance)</td>
  <td>50%</td>
</tr>

<!-- MARE -->
<tr>
  <td>Mare</td>
  <td>More likely to hunt in dark; hates lights turned on</td>
  <td>Prefers dark rooms</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>60% / 40% (dark / lit)</td>
</tr>

<!-- REVENANT -->
<tr>
  <td>Revenant</td>
  <td>Extremely fast w/ line-of-sight; very slow w/o it</td>
  <td>Normal roam</td>
  <td>Slow</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.0</td>
  <td>Up to ~3.0 (line-of-sight)</td>
  <td>50%</td>
</tr>

<!-- SHADE -->
<tr>
  <td>Shade</td>
  <td>Very shy & quiet; fewer hunts w/ people nearby</td>
  <td>Less roam w/ players close</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- DEMON (UPDATED) -->
<tr>
  <td>Demon</td>
  <td>Frequent hunts; can hunt from 70% avg sanity; special ability hunts at 100% & larger crucifix range (~5m)</td>
  <td>Aggressive roam</td>
  <td>Normal</td>
  <td></td> <!-- No forced evidence for Demon -->
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>70% / 100%</td>
</tr>

<!-- YUREI -->
<tr>
  <td>Yurei</td>
  <td>Can slam doors & significantly lower sanity w/ ability</td>
  <td>Normal roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- ONI -->
<tr>
  <td>Oni</td>
  <td>More visible hunts; highly active when people around</td>
  <td>Aggressive roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- YOKAI -->
<tr>
  <td>Yokai</td>
  <td>Hunts if players talk near it (higher sanity threshold)</td>
  <td>Attracted to voices</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>80% / 50% (talking / silent)</td>
</tr>

<!-- HANTU -->
<tr>
  <td>Hantu</td>
  <td>Moves faster in colder rooms; slower in warm</td>
  <td>Normal roam</td>
  <td>Temp-based</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>~1.4 - 2.7</td>
  <td>~1.4 - 2.7 (depending on room temp)</td>
  <td>50%</td>
</tr>

<!-- GORYO -->
<tr>
  <td>Goryo</td>
  <td>DOTS only visible on cam & from far; rarely leaves room</td>
  <td>Minimal roam from its room</td>
  <td>Normal</td>
  <td></td> <!-- Goryo does NOT have truly forced DOTS in no-evidence mode -->
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- MYLING -->
<tr>
  <td>Myling</td>
  <td>Quieter footsteps & more frequent vocal sounds on paramic</td>
  <td>Normal roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- ONRYO -->
<tr>
  <td>Onryo</td>
  <td>Early hunts if flame is extinguished near it</td>
  <td>Normal roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50% / 60% (flame out)</td>
</tr>

<!-- THE TWINS -->
<tr>
  <td>The Twins</td>
  <td>Two entities: main ghost & decoy w/ separate interactions</td>
  <td>Dual roam</td>
  <td>Normal & slight variant</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6 & 1.5</td>
  <td>1.6 & 1.7</td>
  <td>50%</td>
</tr>

<!-- RAIJU -->
<tr>
  <td>Raiju</td>
  <td>Faster near active electronics; stronger EMF interference</td>
  <td>Drawn to electronics</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>Up to ~2.5 (w/ electronics)</td>
  <td>50% / 65%</td>
</tr>

<!-- OBAKE -->
<tr>
  <td>Obake</td>
  <td>Fingerprints fade quickly; rare 6-finger print; shapeshift events</td>
  <td>Normal roam</td>
  <td>Normal</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6</td>
  <td>1.6</td>
  <td>50%</td>
</tr>

<!-- THE MIMIC (FORCED EVIDENCE) -->
<tr>
  <td>The Mimic</td>
  <td>Copies other ghost abilities; ALWAYS has ghost orbs</td>
  <td>Varies (mimics target ghost)</td>
  <td>Varies</td>
  <td>Ghost Orbs <!-- The Mimic has forced orbs in any mode --></td>
  <td>1.5m / 3.0m</td>
  <td>Varies</td>
  <td>Varies</td>
  <td>Varies</td>
</tr>

<!-- MOROI -->
<tr>
  <td>Moroi</td>
  <td>Curses players via Spirit Box; speeds up as average sanity drops</td>
  <td>Normal roam</td>
  <td>Faster w/ lower sanity</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>~1.5 (base)</td>
  <td>Up to ~2.25 at 0% sanity</td>
  <td>50%</td>
</tr>

<!-- DEOGEN -->
<tr>
  <td>Deogen</td>
  <td>Knows your location always; very slow up close, faster far</td>
  <td>Pinpoint roam</td>
  <td>Variable</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>~1.6 (avg)</td>
  <td>~0.4 - 3.0 (distance-based)</td>
  <td>40%</td>
</tr>

<!-- THAYE -->
<tr>
  <td>Thaye</td>
  <td>Starts very active & fast; ages/weaker over time</td>
  <td>Active early roam</td>
  <td>Decreases over time</td>
  <td></td>
  <td>1.5m / 3.0m</td>
  <td>1.6 (initial)</td>
  <td>~1.0 final (aged)</td>
  <td>75% / 15% (longer present)</td>
</tr>

      </tbody>
    </table>
  </div>

  <!-- CURSED ITEMS TABLE -->
  <div class="table-wrapper">
    <h1>Cursed Items Table</h1>
    <div class="search-box" style="text-align:center;">
      <input 
        type="text"
        id="cursedSearch"
        placeholder="Search Cursed Items..."
        onkeyup="searchSimple('cursedSearch','cursedTable')"
      />
    </div>
    <table class="red-table" id="cursedTable">
      <thead>
        <tr>
          <th>Map</th>
          <th>Ouija Board</th>
          <th>Music Box</th>
          <th>Tarot Cards</th>
          <th>Summoning Circle</th>
          <th>Haunted Mirror</th>
          <th>Voodoo Doll</th>
          <th>Monkey Paw</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>6 Tanglewood Drive</td>
          <td>Basement table</td>
          <td>Nursery shelf</td>
          <td>Living Room end table</td>
          <td>Basement center</td>
          <td>Master BR wall</td>
          <td>Garage trashcan</td>
          <td>Living Room case</td>
        </tr>
      </tbody>
    </table>
  </div>

<script>
  /************************************************************
   1) DRAW THE CIRCLE THEN THE PENTAGRAM
  ************************************************************/
  const circlePath = document.getElementById("circlePath");
  const starPath   = document.getElementById("starPath");

  const circleLen = circlePath.getTotalLength();
  const starLen   = starPath.getTotalLength();

  circlePath.style.strokeDasharray  = circleLen;
  circlePath.style.strokeDashoffset = circleLen;
  starPath.style.strokeDasharray    = starLen;
  starPath.style.strokeDashoffset   = starLen;

  drawPath(circlePath, circleLen, 2000, () => {
    drawPath(starPath, starLen, 3000);
  });

  function drawPath(pathElem, totalLen, duration, onComplete) {
    let start = null;
    function step(timestamp) {
      if (!start) start = timestamp;
      let progress = timestamp - start;
      let fraction = Math.min(progress / duration, 1);
      pathElem.style.strokeDashoffset = totalLen * (1 - fraction);
      if (fraction < 1) {
        requestAnimationFrame(step);
      } else if (onComplete) {
        onComplete();
      }
    }
    requestAnimationFrame(step);
  }

  /************************************************************
   2) EMBERS (Random Sine-Wave Drift)
  ************************************************************/
  const emberContainer = document.getElementById("emberContainer");
  let emberIndex = 0;

  function spawnEmber() {
    emberIndex++;
    const ember = document.createElement('div');
    ember.classList.add('ember');
    ember.style.left = (Math.random() * 100) + '%';

    const maxRise = 300 + Math.random() * 400;
    const waveCount = 0.5 + Math.random() * 1.5;
    const amplitude = 5 + Math.random() * 10;
    const sign      = Math.random() < 0.5 ? 1 : -1;

    const animName = 'emberFloat' + emberIndex;
    const styleEl  = document.createElement('style');

    let keyframes = `@keyframes ${animName} {\n`;
    for (let i=0; i<=100; i+=5) {
      const frac = i/100;
      const x = amplitude * sign * Math.sin(waveCount * 2*Math.PI * frac);
      const y = -maxRise * frac;
      let op = 1;
      if (i <= 10)      op = i/10;
      else if (i >= 90) op = 1 - (i-90)/10;

      keyframes += `
        ${i}% {
          transform: translate(${x}px, ${y}px);
          opacity: ${op.toFixed(2)};
        }
      `;
    }
    keyframes += '}';

    styleEl.innerHTML = keyframes;
    document.head.appendChild(styleEl);

    ember.style.animation = `${animName} 5.5s linear forwards`;
    ember.addEventListener('animationend', () => {
      if (ember.parentNode) ember.parentNode.removeChild(ember);
      document.head.removeChild(styleEl);
    });

    emberContainer.appendChild(ember);
  }

  // spawn embers
  setInterval(spawnEmber, 700);
  for (let i=0; i<12; i++) spawnEmber();

  /************************************************************
   3) GHOSTS TABLE: SEARCH + EVIDENCE FILTER
  ************************************************************/
  function filterAllGhosts() {
    const searchInput = document.getElementById("ghostSearch").value.toLowerCase();
    const table = document.getElementById("ghostTable");
    const tbody = table.getElementsByTagName("tbody")[0];
    const rows = tbody.getElementsByTagName("tr");

    const checkboxes = document.querySelectorAll(".evidence-boxes input[type='checkbox']");
    let selectedEvidences = [];
    checkboxes.forEach(cb => {
      if (cb.checked) selectedEvidences.push(cb.value.toLowerCase());
    });

    for (let i=0; i<rows.length; i++) {
      rows[i].style.display = "";

      const rowText = rows[i].textContent.toLowerCase();
      if (searchInput && !rowText.includes(searchInput)) {
        rows[i].style.display = "none";
        continue;
      }

      // forced evidence = col 4
      const forcedEvidence = rows[i].getElementsByTagName("td")[4].textContent.toLowerCase();
      for (let ev of selectedEvidences) {
        if (!forcedEvidence.includes(ev)) {
          rows[i].style.display = "none";
          break;
        }
      }
    }
  }

  /************************************************************
   4) SORTING FOR GHOST TABLE
  ************************************************************/
  function sortGhostTable(colIndex, numeric) {
    const table = document.getElementById("ghostTable");
    const tbody = table.getElementsByTagName("tbody")[0];
    let rows = Array.from(tbody.getElementsByTagName("tr"));

    const currentDir = table.getAttribute("data-sortdir"+colIndex) || "asc";
    const newDir = (currentDir === "asc") ? "desc" : "asc";
    table.setAttribute("data-sortdir"+colIndex, newDir);

    rows.sort((a,b) => {
      let x = a.getElementsByTagName("td")[colIndex].textContent.trim();
      let y = b.getElementsByTagName("td")[colIndex].textContent.trim();

      if (numeric) {
        x = parseFloat(x.replace(/[^\d.]/g, "")) || 0;
        y = parseFloat(y.replace(/[^\d.]/g, "")) || 0;
      } else {
        x = x.toLowerCase();
        y = y.toLowerCase();
      }

      if (newDir === "asc") {
        return (x > y) ? 1 : (x < y) ? -1 : 0;
      } else {
        return (x < y) ? 1 : (x > y) ? -1 : 0;
      }
    });
    rows.forEach(r => tbody.appendChild(r));
  }

  /************************************************************
   5) SIMPLE SEARCH FOR CURSED ITEMS
  ************************************************************/
  function searchSimple(inputId, tableId) {
    const input = document.getElementById(inputId).value.toLowerCase();
    const table = document.getElementById(tableId);
    const rows = table.getElementsByTagName("tr");

    for (let i=1; i<rows.length; i++) {
      const rowText = rows[i].textContent.toLowerCase();
      rows[i].style.display = rowText.includes(input) ? "" : "none";
    }
  }

  /************************************************************
   6) DEFAULT SORT BY NAME (DESC from A to Z top->bottom) ON LOAD
  ************************************************************/
  window.addEventListener('load', () => {
    // We'll interpret "descending so from A at top to Z at bottom" 
    // as standard alphabetical ascending. 
    // We'll do a trick to ensure we end up w/ 'desc' from the code's viewpoint
    // so the final visual is A->Z top to bottom.
    const ghostTable = document.getElementById('ghostTable');
    // Force next toggle on col 0 to be asc
    ghostTable.setAttribute('data-sortdir0','desc'); 
    // Now calling sort triggers newDir = 'asc' => "A to Z" top->bottom
    sortGhostTable(0,false);

    checkScroll();
  });

  /************************************************************
   7) SHOW/HIDE SCROLLBAR ON DESKTOP IF CONTENT FITS
      On mobile, always enable scroll
  ************************************************************/
  window.addEventListener('resize', checkScroll);
  function checkScroll() {
    // if mobile, always show auto
    if (window.innerWidth <= 768) {
      document.body.style.overflowY = 'auto';
      return;
    }
    // desktop
    if (document.body.scrollHeight > window.innerHeight) {
      document.body.style.overflowY = 'auto';  // content > screen => scroll
    } else {
      document.body.style.overflowY = 'hidden'; // content fits => hide scrollbar
    }
  }
</script>
</body>
</html>
